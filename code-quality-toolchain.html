<!DOCTYPE html>
<html lang="en-ZA">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Quality & Tooling Standards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A thematic, single-page application structured around eight core 'pillars'. This structure provides a comprehensive but digestible overview of the proposed standards, allowing users to navigate to specific topics of interest. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Comprehensive standards for Python tooling, documentation, and dependencies. Goal: To create a collaborative "discussion document" for a mixed-skill audience to review and provide feedback on.
        - Viz/Presentation Method: Tool details are presented in structured HTML cards. Specific, commented code examples use a GitHub-dark theme for readability. Policy blocks and summary tables are used to structure complex information.
        - Interaction: Clicking a pillar tab updates the main content area to display the relevant policies and tools.
        - Justification: This interactive format breaks a large amount of information into manageable chunks, preventing reader fatigue and allowing for both quick scans (summary table) and deep dives (pillar details).
        - Library/Method: Vanilla JS, Tailwind CSS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        .pillar-nav-btn {
            transition: all 0.3s ease;
        }
        .pillar-nav-btn.active {
            background-color: #0f766e; /* teal-700 */
            color: #ffffff;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tool-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            padding-top: 2rem;
        }
        .tool-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .tool-icon {
            position: absolute;
            top: -1.25rem;
            left: 1.5rem;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
        }
        .code-block-dark {
            background-color: #0d1117;
            color: #c9d1d9;
            border: 1px solid #30363d;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        .code-block-dark code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
        }
        .code-block-dark .code-comment {
            color: #8b949e;
        }
        .code-block-dark .code-keyword {
            color: #ff7b72;
        }
        .code-block-dark .code-function {
            color: #d2a8ff;
        }
        .code-block-dark .code-string {
            color: #a5d6ff;
        }
        .code-block-dark .code-number {
            color: #79c0ff;
        }
        .code-block-dark .code-type {
            color: #ffa657;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-teal-800 tracking-tight">Coding Quality & Tooling Standards</h1>
            <p class="mt-4 text-xl text-slate-600">A Discussion Document for the Python Working Group</p>
        </header>

        <section id="introduction" class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md mb-12">
            <h2 class="text-2xl font-bold text-teal-700 mb-4">A Strategic Framework for Python</h2>
            <p class="text-slate-700 leading-relaxed mb-4">
                This proposal outlines a quality and tooling framework for Python to support its growing use in specialised, high-value domains. While our core enterprise systems and user interfaces will continue to be built on the proven strength of C#/Java and Angular, Python offers unparalleled capabilities for data science, AI/ML, quantitative analysis, and automation.
            </p>
            <p class="text-slate-700 leading-relaxed mb-4">
                Our objective is to ensure that these specialised Python applications are developed with the same rigour, reliability, and security as our mission-critical systems. The standards recommended here are designed to provide a safety net and a consistent development experience, enabling our teams to innovate confidently while upholding our commitment to quality.
            </p>
             <div class="mt-6 bg-teal-50 p-4 rounded-lg border-l-4 border-teal-500">
                <p class="text-teal-800">Please note: This document proposes a comprehensive set of tools. Approval is not expected today. A <strong>three-week</strong> period for review and feedback is planned before we reconvene for final vetting.</p>
            </div>
        </section>

        <main class="max-w-4xl mx-auto">
            <nav id="pillar-navigation" class="flex flex-wrap justify-center gap-2 md:gap-4 mb-10">
            </nav>

            <div id="content-display" class="space-y-8">
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const pillarData = {
                correctness: {
                    id: 'correctness',
                    name: 'Correctness & Style',
                    icon: '&#x2714;&#xFE0F;',
                    description: 'This pillar is about ensuring our Python-based analytical models and scripts are as readable and maintainable as our core enterprise applications. For developers coming from C#, think of this as enforcing coding conventions automatically to ensure consistency and reduce cognitive load.',
                    content: `
                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Beyond Tools: Core Design Principles</h3>
                             <p class="text-slate-600 mb-6">While tools enforce rules, great software is built on principles. For our Python codebases, especially larger applications, we encourage adherence to language-agnostic principles that our C# and Java developers will find familiar:</p>
                             <ul class="list-disc list-inside space-y-2 text-slate-700">
                                <li><strong>DRY (Don't Repeat Yourself):</strong> Avoid duplicating code; abstract common logic into reusable functions or classes.</li>
                                <li><strong>SoC (Separation of Concerns):</strong> Structure code so that each part handles a separate concern.</li>
                                <li><strong>SOLID:</strong> These five principles of object-oriented design help create more understandable, flexible, and maintainable systems.</li>
                             </ul>
                        </div>
                    `,
                    tools: [
                        { 
                            name: 'Ruff', 
                            icon: '&#129425;',
                            icon_bg: 'bg-sky-600',
                            what: 'An extremely fast Python linter and code formatter. (A "linter" is a tool that automatically checks code for stylistic or programming errors).',
                            why: 'It replaces a dozen older, slower tools with a single, lightning-fast application. This means developers get instant feedback and our automated checks finish in seconds, not minutes.',
                            usage: 'Ruff is our primary recommendation for linting and formatting. It should be integrated into every developer\'s IDE and run automatically.',
                        },
                        { 
                            name: 'PEP 8', 
                            icon: '&#128214;',
                            icon_bg: 'bg-sky-800',
                            what: 'The official style guide for Python code.',
                            why: 'Adhering to a single style guide is crucial for maintainability. By adopting the universal standard, our code becomes instantly familiar to any Python developer and easier to read for non-experts.',
                            usage: 'All Python code should conform to PEP 8 standards. This is the baseline for professional Python code and is enforced automatically by Ruff.',
                            details: `
                                <h5 class="font-semibold text-slate-700 mt-4">Key PEP 8 Examples</h5>
                                <ul class="list-disc list-inside space-y-2 text-slate-600 mt-2">
                                    <li><b>Naming Conventions:</b> Use <code>snake_case</code> for functions and variables (e.g., <code>calculate_profit</code>).</li>
                                    <li><b>Line Length:</b> Limit all lines to a maximum of 88 characters to improve readability.</li>
                                    <li><b>Blank Lines:</b> Use single blank lines to separate logical sections.</li>
                                </ul>
                            `
                        }
                    ],
                },
                typesafety: {
                    id: 'typesafety',
                    name: 'Type Safety',
                    icon: '&#x1F524;',
                    description: 'For those from a C# or Java background, this is a key concept. It is crucial for bringing enterprise-level reliability to Python\'s powerful analytical libraries. By adding "type hints", we allow tools to check for data-related bugs <b>before</b> the code runs, making it safer and self-documenting.',
                    content: `
                        <div class="tool-card bg-white p-6 rounded-lg border border-slate-200">
                            <div class="tool-icon bg-gray-500">&#128196;</div>
                            <h4 class="text-xl font-semibold text-teal-700 ml-1">Example: Type Hints in Action</h4>
                            <p class="text-slate-600 mt-4 mb-4">Type hints make code clearer and safer. Below is a simple function without and with type hints.</p>
                            
                            <h5 class="font-semibold text-slate-700"><b>Before</b> (Standard Python)</h5>
                            <pre class="code-block-dark mt-2 mb-4"><code><span class="code-comment"># This function works, but what types does it expect?</span>
<span class="code-comment"># We only find out at runtime if we pass the wrong data.</span>
<span class="code-keyword">def</span> <span class="code-function">calculate_price</span>(quantity, unit_price):
    <span class="code-keyword">return</span> quantity * unit_price</code></pre>

                            <h5 class="font-semibold text-slate-700"><b>After</b> (With Type Hints)</h5>
                            <pre class="code-block-dark mt-2"><code><span class="code-comment"># Clear, self-documenting, and checkable by tools.</span>
<span class="code-keyword">def</span> <span class="code-function">calculate_price</span>(quantity: <span class="code-type">int</span>, unit_price: <span class="code-type">float</span>) -> <span class="code-type">float</span>:
    <span class="code-comment"># quantity: int -> "quantity" is expected to be an integer.</span>
    <span class="code-comment"># unit_price: float -> "unit_price" is expected to be a float.</span>
    <span class="code-comment"># -> float -> The function is declared to return a float.</span>
    <span class="code-keyword">return</span> quantity * unit_price</code></pre>
                        </div>
                    `,
                    tools: [
                         { 
                            name: 'Mypy', 
                            icon: '&#128270;',
                            icon_bg: 'bg-emerald-600',
                            what: 'A static type checker for Python. (A "type checker" validates that the data types used in your code are consistent, preventing runtime errors).',
                            why: 'Mypy acts as our "type compiler". It is the gatekeeper in our automated workflows that ensures no code with type-related bugs makes it into production. This is our primary risk-reduction tool.',
                            usage: 'We propose Mypy as the required type checker for all CI pipelines. A successful Mypy run would be a mandatory quality gate for mission-critical applications.',
                        },
                        { 
                            name: 'Pylance / Pyright', 
                            icon: '&#128161;',
                            icon_bg: 'bg-emerald-800',
                            what: 'A language server that provides real-time type checking in the editor. (A "language server" provides IDE features like auto-completion and error highlighting).',
                            why: 'This is the developer productivity tool. It provides the rich IntelliSense and real-time error highlighting you expect from modern IDEs, making it faster and more intuitive to write correct code.',
                            usage: 'Pylance is the recommended VS Code extension for real-time feedback.',
                        }
                    ],
                    policy: {
                        title: 'Proposed Type Hint Enforcement Policy',
                        description: 'This proposed policy on type hints balances rigour with practicality, adapting to the context of the project.',
                        levels: [
                            { name: 'Large Projects / Codebases', details: 'Strict enforcement. All function signatures and variable declarations MUST include type hints.' },
                            { name: 'Small Scripts / Utilities', details: 'Encouraged. Type hints are strongly recommended for clarity and safety, but not strictly mandatory.' },
                            { name: 'Jupyter Notebooks / Research', details: 'Optional but Recommended. While not enforced, using type hints in notebooks can prevent subtle bugs during data exploration.' }
                        ]
                    },
                },
                dependencies: {
                    id: 'dependencies',
                    name: 'Dependency Management',
                    icon: '&#128230;',
                    description: 'Properly managing project dependencies is fundamental to creating reproducible and isolated Python applications. The following standards have already been discussed and approved. They are presented here again to provide a complete picture of our tooling landscape.',
                    tools: [
                        { 
                            name: 'Poetry / uv',
                            icon: '&#128226;',
                            icon_bg: 'bg-indigo-600',
                            what: 'A modern dependency management tool.',
                            why: 'Provides robust dependency resolution and deterministic builds via a lock file. This guarantees that every developer and the build server are using the exact same versions of all packages.',
                            usage: 'Approved for large or long-lived Python projects and applications, especially those developed by IT teams.',
                        },
                         { 
                            name: 'Conda',
                            icon: '&#128013;',
                            icon_bg: 'bg-green-600',
                            what: 'A package and environment manager.',
                            why: 'Conda excels at managing complex, non-Python dependencies (e.g., C/C++ libraries) common in scientific computing and quantitative analysis.',
                            usage: 'Approved for data science and quant projects that require packages outside of the standard Python ecosystem.',
                        },
                         { 
                            name: 'pip & venv',
                            icon: '&#128228;',
                            icon_bg: 'bg-gray-500',
                            what: 'Python\'s built-in tools for package installation and virtual environments.',
                            why: 'They are part of the Python standard library, making them universally available and easy to use for basic isolation.',
                            usage: 'Approved for simple scripts, Jupyter notebooks for exploration, and learning purposes.',
                        }
                    ]
                },
                testing: {
                    id: 'testing',
                    name: 'Testing & Reliability',
                    icon: '&#129516;',
                    description: 'Automated tests are our safety net, especially critical for validating the complex logic within our quantitative models and data pipelines. Our initial focus is on <b>unit testing</b>, which involves testing the smallest pieces of code (like a single function) in isolation. Broader strategies will be developed in alignment with the future Testing COE.',
                    policy: {
                        title: 'Proposed Layered Testing Policy',
                        description: 'The required rigour for testing should match the criticality of the application.',
                        levels: [
                            { name: 'Mission-Critical Applications (IT-led)', details: 'High rigour is mandatory. Comprehensive unit tests are required, and projects must meet a high, pre-defined test coverage threshold.' },
                            { name: 'Business Models & Analytics (Quant/SME-led)', details: 'Testing should focus on the correctness of core algorithms and data transformations. The emphasis is on validating key business logic rather than exhaustive edge-case testing.' },
                            { name: 'Ad-hoc Scripts & Notebooks', details: 'Formal testing is not mandatory, but it is strongly encouraged to write tests for any critical functions that may be reused or have a significant impact.' }
                        ]
                    },
                     content: `
                        <div class="tool-card bg-white p-6 rounded-lg border border-slate-200">
                            <div class="tool-icon bg-gray-500">&#128196;</div>
                            <h4 class="text-xl font-semibold text-teal-700 ml-1">Example: A Simple Pytest Test</h4>
                            <p class="text-slate-600 mt-4 mb-4">Imagine we have a simple function in a file called <code>my_module.py</code>.</p>
                            
                            <h5 class="font-semibold text-slate-700">The Function to Test (in <code>my_module.py</code>)</h5>
                            <pre class="code-block-dark mt-2 mb-4"><code><span class="code-keyword">def</span> <span class="code-function">add</span>(a: <span class="code-type">int</span>, b: <span class="code-type">int</span>) -> <span class="code-type">int</span>:
    <span class="code-string">"""Adds two numbers together."""</span>
    <span class="code-keyword">return</span> a + b</code></pre>

                            <h5 class="font-semibold text-slate-700">The Test File (in <code>test_my_module.py</code>)</h5>
                            <pre class="code-block-dark mt-2"><code><span class="code-comment"># Pytest will automatically find and run this file and functions.</span>
<span class="code-keyword">from</span> my_module <span class="code-keyword">import</span> add

<span class="code-comment"># A simple test to check the addition of two positive numbers.</span>
<span class="code-keyword">def</span> <span class="code-function">test_add_positive_numbers</span>():
    <span class="code-keyword">assert</span> add(<span class="code-number">2</span>, <span class="code-number">3</span>) == <span class="code-number">5</span>

<span class="code-comment"># The 'assert' keyword checks if the statement is true.</span>
<span class="code-keyword">def</span> <span class="code-function">test_add_negative_numbers</span>():
    <span class="code-keyword">assert</span> add(-<span class="code-number">1</span>, -<span class="code-number">1</span>) == -<span class="code-number">2</span></code></pre>
                        </div>

                         <div class="bg-white p-6 rounded-lg border border-slate-200 mt-8">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Future & Specialised Testing Tools</h3>
                             <p class="text-slate-600 mb-6">While <strong>Pytest</strong> is our core recommendation for unit testing, the Testing COE will evaluate other tools for specialised needs. These may include:</p>
                             <ul class="list-disc list-inside space-y-3 text-slate-700">
                                <li><strong>Playwright:</strong> For modern UI and browser automation testing.</li>
                                <li><strong>Pydantic:</strong> For data validation and settings management, which can significantly reduce the need for certain types of tests.</li>
                             </ul>
                        </div>
                    `,
                    tools: [
                        { 
                            name: 'Pytest', 
                            icon: '&#128295;',
                            icon_bg: 'bg-amber-600',
                            what: 'A modern and powerful testing framework for Python.',
                            why: 'Pytest makes writing tests simple and clean, which encourages developers to write more of them. It has a rich ecosystem and powerful features that reduce boilerplate code compared to the built-in `unittest` module.',
                            usage: 'Pytest is proposed as the mandatory framework for unit testing. A business case must be presented to the PWG/Engineering and Testing COE for the use of alternative frameworks.',
                        },
                         { 
                            name: 'Coverage.py (via pytest-cov)',
                            icon: '&#127919;',
                            icon_bg: 'bg-amber-800',
                            what: 'A tool for measuring code coverage of Python programs.',
                            why: 'Test coverage shows what percentage of your code is actually executed by your tests. It helps identify untested parts of your application, highlighting areas of potential risk. It provides a measurable goal for testing quality.',
                            usage: 'Run tests using the `pytest --cov` command. This will generate a report showing which lines of code were missed by your tests, guiding you on where to add new tests to improve reliability.',
                        }
                    ],
                },
                performance: {
                    id: 'performance',
                    name: 'Performance',
                    icon: '&#x1F4C8;',
                    description: 'For quants working with large datasets or engineers building low-latency systems, performance is key. This pillar is about identifying "hot spots" in the code that are slow. Instead of guessing, we use profilers to get precise data on where to focus optimisation efforts.',
                    tools: [
                        { 
                            name: 'Pyinstrument', 
                            icon: '&#8987;',
                            icon_bg: 'bg-violet-600',
                            what: 'A statistical profiler for Python.',
                            why: 'Pyinstrument is simple, fast, and gives a very clear, intuitive output. It helps any developer quickly answer "Why is my code slow?" without needing deep expertise in performance analysis.',
                            usage: 'The recommended tool for developers to profile code. The use of other profiling tools (like the built-in `cProfile`) would require motivation to the PWG/Engineering.',
                        }
                    ],
                },
                security: {
                    id: 'security',
                    name: 'Security',
                    icon: '&#128737;',
                    description: 'This pillar is about integrating security into our development lifecycle from the start (DevSecOps). Our proposed approach is multi-layered, providing an automated first line of defence to catch and fix security flaws before they can be exploited, which is non-negotiable for financial systems.<br><em>Note: This section provides a high-level overview. A more detailed security proposal will be presented in a future session. Its inclusion here is timely given the current review of the ASH v3 framework.</em>',
                     content: `
                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Our Multi-Layered Security Approach</h3>
                             <p class="text-slate-600 mb-6">We propose a holistic security strategy that includes:</p>
                             <ul class="list-disc list-inside space-y-3 text-slate-700">
                                <li><strong>Centralised Package Repository:</strong> A central, internal repository will be created and populated with pre-vetted packages. Packages will be approved based on security scans (SAST, SCA), licensing, SBOM, and qualitative measures (e.g., open-source project health).</li>
                                <li><strong>Continuous Verification:</strong> While the central repository provides a baseline of trust, all projects must still include automated security checks in their pre-commit hooks and CI/CD pipelines to guard against newly discovered vulnerabilities or project-specific risks.</li>
                                <li><strong>SAST (Static Application Security Testing):</strong> Automatically scanning our own source code for vulnerabilities using the tools below.</li>
                                <li><strong>SCA (Software Composition Analysis):</strong> Scanning third-party libraries we use for known vulnerabilities.</li>
                                <li><strong>Secrets Management:</strong> Enforcing best practices for handling API keys and passwords, ensuring they are never hard-coded.</li>
                             </ul>
                        </div>
                    `,
                    tools: [
                        { 
                            name: 'Semgrep', 
                            icon: '&#128270;',
                            icon_bg: 'bg-rose-600',
                            what: 'A fast, customisable static analysis tool.',
                            why: 'Semgrep is powerful because it understands code structure. We can write custom rules to enforce security policies specific to our internal frameworks (e.g., the proposed ASH v3).',
                            usage: 'We recommend running this in CI pipelines on every commit to scan for known vulnerabilities and enforce custom security patterns.',
                        },
                        { 
                            name: 'Bandit', 
                            icon: '&#128273;',
                            icon_bg: 'bg-rose-800',
                            what: 'A tool designed to find common security issues in Python code.',
                            why: 'Bandit is a specialised Python security scanner. It serves as a valuable second opinion, focused entirely on common Python security pitfalls, providing an extra layer of automated diligence.',
                            usage: 'Proposed for integration into our CI/CD pipelines as an additional layer of automated security analysis.',
                        }
                    ],
                },
                 documentation: {
                    id: 'documentation',
                    name: 'Documentation',
                    icon: '&#128211;',
                    description: 'Good documentation is essential for creating maintainable and collaborative projects. It helps with onboarding new team members and ensures that knowledge is shared effectively. <em>Note: This section is a preview of our documentation standards. A full, detailed chapter will be developed for the official standards document.</em>',
                    content: `
                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Immediate Priorities</h3>
                             <p class="text-slate-600 mb-6">For now, we propose that all projects must, at a minimum, include:</p>
                             <ul class="list-disc list-inside space-y-3 text-slate-700">
                                <li>A detailed <strong>README.md</strong> file in the project root, explaining what the project does, how to set it up, and how to run it.</li>
                                <li><strong>Google Style Docstrings</strong> for all public modules, classes, functions, and methods.</li>
                                <li>Clear, concise <strong>in-code comments</strong> to explain complex or non-obvious logic.</li>
                             </ul>
                        </div>

                        <div class="tool-card bg-white p-6 rounded-lg border border-slate-200">
                            <div class="tool-icon bg-gray-500">&#128196;</div>
                            <h4 class="text-xl font-semibold text-teal-700 ml-1">Example: Google Style Docstring</h4>
                            <pre class="code-block-dark mt-2"><code><span class="code-keyword">def</span> <span class="code-function">calculate_price</span>(quantity: <span class="code-type">int</span>, unit_price: <span class="code-type">float</span>) -> <span class="code-type">float</span>:
    <span class="code-string">"""Calculates the total price based on quantity and unit price.

    Args:
        quantity: The number of items. Must be a positive integer.
        unit_price: The price of a single item.

    Returns:
        The total price as a float.

    Raises:
        ValueError: If quantity is not a positive integer.
    """</span>
    <span class="code-keyword">if not</span> isinstance(quantity, <span class="code-type">int</span>) <span class="code-keyword">or</span> quantity <= <span class="code-number">0</span>:
        <span class="code-keyword">raise</span> <span class="code-type">ValueError</span>(<span class="code-string">"Quantity must be a positive integer."</span>)
    <span class="code-keyword">return</span> quantity * unit_price</code></pre>
                        </div>
                    `,
                    tools: [
                        {
                            name: 'MkDocs',
                            icon: '&#128209;',
                            icon_bg: 'bg-blue-600',
                            what: 'A fast and simple static site generator for project documentation.',
                            why: 'MkDocs makes it easy to generate a professional-looking documentation website from Markdown files. It is far simpler to set up and use than more complex tools like Sphinx.',
                            usage: 'The default and recommended tool for projects that need a dedicated documentation site. Can be configured to build and deploy automatically.',
                        },
                         {
                            name: 'Swagger UI / OpenAPI',
                            icon: '&#128279;',
                            icon_bg: 'bg-lime-600',
                            what: 'A standard for designing, building, and documenting RESTful APIs.',
                            why: 'Provides interactive, machine-readable documentation for our APIs. This allows consumers of our APIs to easily understand and test endpoints without needing to read the source code.',
                            usage: 'Mandatory for all new REST APIs. Frameworks like FastAPI can generate this automatically.',
                        }
                    ],
                },
                summary: {
                    id: 'summary',
                    name: 'Summary & Next Steps',
                    icon: '&#127937;',
                    description: 'We acknowledge that this proposal introduces a comprehensive toolchain. The goal today is not to seek immediate approval, but to present a well-researched <b>discussion document</b> to kick-start a focused collaboration. We expect and encourage every team member to review these recommendations and provide feedback.',
                    content: `
                         <div class="bg-teal-50 p-6 rounded-lg border-l-4 border-teal-500">
                             <h3 class="text-xl font-bold text-teal-800 mb-2">Call to Action: Your Feedback is Crucial</h3>
                             <p class="text-teal-700">Please take the next <strong>two to three weeks</strong> to familiarise yourself with these proposals. The PWG will table this topic again for a final vetting and approval session after this feedback period. To ground this discussion in practice, we suggest the newly approved <strong>"Risk Management"</strong> project could be a pioneer for these evolving standards. Their team of quants, with support and guidance from IT, would be ideal partners in helping us create a practical template that benefits everyone.</p>
                        </div>

                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Tooling Summary</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left border-collapse">
                                    <thead class="bg-slate-100">
                                        <tr>
                                            <th class="p-3 font-semibold text-slate-700 border-b">Tool</th>
                                            <th class="p-3 font-semibold text-slate-700 border-b">Category</th>
                                            <th class="p-3 font-semibold text-slate-700 border-b">Approval Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y">
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Poetry/uv, Conda, pip/venv</td> <td class="p-3">Dependencies</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full">Approved</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Ruff</td> <td class="p-3">Correctness</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Mypy</td> <td class="p-3">Type Safety</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Pylance</td> <td class="p-3">Type Safety (IDE)</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Pytest</td> <td class="p-3">Testing</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Coverage.py</td> <td class="p-3">Testing</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Pyinstrument</td> <td class="p-3">Performance</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">Semgrep/Bandit + ASH v3</td> <td class="p-3">Security</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                        <tr class="hover:bg-slate-50"> <td class="p-3">MkDocs</td> <td class="p-3">Documentation</td> <td class="p-3"><span class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full">Proposed</span></td> </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                       
                         <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">Next Steps</h3>
                             <p class="text-slate-600 mb-6">Following the feedback period and approval, we plan to:</p>
                             <ol class="list-decimal list-inside space-y-3 text-slate-700">
                                <li>Formalise this proposal into a "Code Quality & Tooling" chapter to be included in the official Python Standards document for final review.</li>
                                <li>Collaborate with pioneering projects, such as the "Risk Management" team, to create a "Golden Path" project template that showcases these tools and best practices.</li>
                                <li>Schedule a dedicated follow-up session to present a more detailed proposal for the Security pillar.</li>
                             </ol>
                        </div>
                    `,
                    tools: []
                }
            };
            
            const navigation = document.getElementById('pillar-navigation');
            const contentDisplay = document.getElementById('content-display');
            
            function createPillarCardHTML(pillar) {
                let toolsHTML = pillar.tools.map(tool => `
                    <div class="tool-card bg-white p-6 rounded-lg border border-slate-200">
                        <div class="tool-icon ${tool.icon_bg}">${tool.icon}</div>
                        <h4 class="text-xl font-semibold text-teal-700 ml-1">${tool.name}</h4>
                        <div class="mt-4 space-y-4">
                            <div>
                                <h5 class="font-semibold text-slate-700">What It Is</h5>
                                <p class="text-slate-600 mt-1">${tool.what}</p>
                            </div>
                            <div>
                                <h5 class="font-semibold text-slate-700">Why We Recommend It</h5>
                                <p class="text-slate-600 mt-1">${tool.why}</p>
                            </div>
                            <div>
                                <h5 class="font-semibold text-slate-700">Recommended Usage</h5>
                                <p class="text-slate-600 mt-1">${tool.usage}</p>
                            </div>
                            ${tool.details ? `<div class="mt-2">${tool.details}</div>` : ''}
                        </div>
                    </div>
                `).join('');

                let policyHTML = '';
                if(pillar.policy) {
                    let levelsHTML = pillar.policy.levels.map(level => `
                        <div class="p-4 bg-teal-50 border-l-4 border-teal-500 rounded-r-lg">
                            <h5 class="font-semibold text-teal-800">${level.name}</h5>
                            <p class="text-teal-700 mt-1">${level.details}</p>
                        </div>
                    `).join('');

                    policyHTML = `
                        <div class="bg-white p-6 rounded-lg border border-slate-200 mt-8">
                             <h3 class="text-2xl font-bold text-slate-800 mb-4">${pillar.policy.title}</h3>
                             <p class="text-slate-600 mb-6">${pillar.policy.description}</p>
                             <div class="space-y-4">${levelsHTML}</div>
                        </div>
                    `;
                }

                return `
                    <div id="pillar-${pillar.id}" class="pillar-content space-y-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h2 class="text-3xl font-bold text-slate-800 mb-4">${pillar.name}</h2>
                            <p class="text-slate-600 leading-relaxed">${pillar.description}</p>
                        </div>
                        ${pillar.content || ''}
                        ${toolsHTML}
                        ${policyHTML}
                    </div>
                `;
            }
            
            function setActivePillar(pillarId) {
                document.querySelectorAll('.pillar-nav-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.pillar === pillarId);
                });

                document.querySelectorAll('.pillar-content').forEach(content => {
                    content.classList.toggle('hidden', content.id !== `pillar-${pillarId}`);
                });
            }

            Object.values(pillarData).forEach(pillar => {
                const button = document.createElement('button');
                button.innerHTML = `<span class="text-2xl mr-2">${pillar.icon}</span> ${pillar.name}`;
                button.className = 'pillar-nav-btn flex items-center justify-center text-center font-semibold py-3 px-5 rounded-lg bg-white text-slate-700 shadow-sm hover:bg-teal-100';
                button.dataset.pillar = pillar.id;
                button.addEventListener('click', () => setActivePillar(pillar.id));
                navigation.appendChild(button);
                contentDisplay.innerHTML += createPillarCardHTML(pillar);
            });
            
            const firstPillarId = Object.keys(pillarData)[0];
            setActivePillar(firstPillarId);
        });
    </script>
</body>
</html>

